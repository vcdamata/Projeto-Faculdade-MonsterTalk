<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Baloo+2&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../styles/header.css" />
    <link rel="stylesheet" href="../styles/sidebar.css" />
    <link rel="stylesheet" href="../styles/dashboard_professor.css" />
    <link rel="stylesheet" href="../styles/dashboard_professor_alunos.css" />
    <link rel="shortcut icon" type="imagex/svg" href="../img/mascote.svg" />
    <title>Alunos - MonsterTalk</title>
  </head>
  <body>
    <header class="topbar">
      <h2 class="saldacao">Olá, Professor</h2>
      <a href="#" class="avatar-link">
        <img src="../img/avatar.png" alt="Avatar do professor" class="avatar" />
      </a>
    </header>

    <aside class="sidebar">
      <div class="sidebar-header">
        <a href="#">
          <img
            src="../img/logo_horizontal.svg"
            alt="Logo MonsterTalk"
            class="logo_horizontal"
          />
        </a>
      </div>
      <nav>
        <ul>
          <li>
            <a href="#">
              <img src="../img/icon_painel.svg" alt="icone painel professor" class="icon_menu" /> Painel
            </a>
          </li>
          <li>
            <a href="#">
              <img src="../img/icon_classe.svg" alt="icone classes" class="icon_menu" /> Classes
            </a>
          </li>
          <li class="active">
            <a href="#">
              <img src="../img/icon_alunos.svg" alt="icone Alunos" class="icon_menu" /> Alunos
            </a>
          </li>
          <li>
            <a href="#">
              <img src="../img/icon_curriculo.svg" alt="icone Currículo" class="icon_menu" /> Currículo
            </a>
          </li>
          <li>
            <a href="#">
              <img src="../img/icon_licoes.svg" alt="icone Lições" class="icon_menu" /> Criar Lições
            </a>
          </li>
          <li>
            <a href="#">
              <img src="../img/icon_forum.svg" alt="icone Fórum" class="icon_menu" /> Fórum
            </a>
          </li>
        </ul>
      </nav>
      <button class="hamburger" aria-label="Abrir menu" aria-expanded="false">&#9776;</button>
    </aside>

    <main class="painel">
      <header class="top-bar">
        <h1>Painel do<br />Professor</h1>
        <div class="cabecalho-alunos-contexto">
          <h2>Administrar Alunos</h2>
        </div>
      </header>

      <div class="add-aluno-container">
        <button id="btnAddNovoAluno" class="btn-principal">Adicionar Novo Aluno +</button>
      </div>

      <section class="lista-alunos-section">
        <h3>Lista de alunos cadastrados</h3>
        <div class="tabela-wrapper">
          <table>
            <thead>
              <tr>
                <th>Nome</th>
                <th>Criação</th>
                <th>Classe</th>
                <th>Opções</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Marilyn Monroe</td>
                <td>28/03/2025</td>
                <td>Turma do barulho</td>
                <td class="acoes">
                  <a href="../dashboard_professor_alunos_editar/editar_aluno.html?nome=Marilyn%20Monroe&turma=turma_do_barulho" class="btn-acao btn-editar">Editar</a>
                  <button class="btn-acao btn-excluir">Excluir</button>
                </td>
              </tr>
              <tr>
                <td>Bob Marley</td>
                <td>28/03/2025</td>
                <td>Turma do barulho</td>
                <td class="acoes">
                  <a href="../dashboard_professor_alunos_editar/editar_aluno.html?nome=Bob%20Marley&turma=turma_do_barulho" class="btn-acao btn-editar">Editar</a>
                  <button class="btn-acao btn-excluir">Excluir</button>
                </td>
              </tr>
              <tr>
                <td>Enzo Gabriel</td>
                <td>15/04/2025</td>
                <td>English Monsters</td>
                <td class="acoes">
                  <a href="../dashboard_professor_alunos_editar/editar_aluno.html?nome=Enzo%20Gabriel&turma=english_monsters" class="btn-acao btn-editar">Editar</a>
                  <button class="btn-acao btn-excluir">Excluir</button>
                </td>
              </tr>
              <tr>
                <td>Valentina dos Santos</td>
                <td>10/01/2025</td>
                <td>English Monsters</td>
                <td class="acoes">
                  <a href="../dashboard_professor_alunos_editar/editar_aluno.html?nome=Valentina%20dos%20Santos&turma=english_monsters" class="btn-acao btn-editar">Editar</a>
                  <button class="btn-acao btn-excluir">Excluir</button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>
    </main>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const studentUpdates = JSON.parse(localStorage.getItem('studentUpdates'));

        if (studentUpdates) {
          const tableRows = document.querySelectorAll('main.painel table tbody tr');
          tableRows.forEach(row => {
            const nomeTd = row.querySelector('td:nth-child(1)'); // Coluna Nome é a primeira
            const turmaTd = row.querySelector('td:nth-child(3)'); // Coluna Classe é a terceira

            if (nomeTd && turmaTd) {
              const nomeAlunoNaTabela = nomeTd.textContent.trim();
              if (studentUpdates[nomeAlunoNaTabela]) {
                turmaTd.textContent = studentUpdates[nomeAlunoNaTabela];
              }
            }
          });
        }

        const hamburger = document.querySelector(".hamburger");
        const sidebar = document.querySelector(".sidebar");

        if (hamburger && sidebar) {
          hamburger.addEventListener("click", () => {
            const isActive = sidebar.classList.toggle("active");
            hamburger.setAttribute("aria-expanded", isActive);
          });
        }
      });
    </script>
  </body>
</html>
